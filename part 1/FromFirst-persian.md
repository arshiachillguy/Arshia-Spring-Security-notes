# تا حالا به این فکر کردی که وقتی کاربر درخواستی میفرسته سمت سرور باید چه مسیری رو طی کنه تا به سرور برسه و از چه مسیری برگرده به خود کاربر؟ اصلا دونستن این مسیر قراره چه کمکی به ما بکنه ؟ ایا میتونیم این مسیر رو شخصی سازی کنیم ؟

قراره راجب این سوالات یکم حرف بزنیم و یادبگیریم ی چیزایی .
برنامه‌های Spring Boot (و Spring Security) معمولاً روی سرورهای جاوایی (Java Servlet Containers) مثل Tomcat، Jetty یا Undertow اجرا می‌شوند. این سرورها مسئول دریافت درخواست‌های HTTP و هدایت آن‌ها به فیلترها و سرولت‌های برنامه هستند.

در مرحله اول وقتی کاربری درخواستی میفرسته ی چیزایی به نام فیلتر وارد عمل میشن تا درخواست ها و پاسخ هارو قبل از رسیدن به سرولت(راجبش حرف میزنیم) پردازش میکنن . 
اون فیلتر هایی که گفتم مثل زنجیر بهم وصلن و کارای اولیه و مختلفی هم انجام میدن .

اینجا چندتاشون رو اوردم با اسم کاملشون :

 <u> بررسی اعتبار کاربر ، احراز هویت : UsernamePasswordAutheticationFilter</u>

 <u>بررسی دسترسی کاربر به منابع (مجوز دهی) : FilterSecurityInterceptor</u>  

 <u> حفاظت در برابر حملات : |CsrfFilter</u> 

 <u>پرداز توکن ها: wtAuthenticationFilter</u>

کار ما با این اسم ها تموم نشده صرفا معرفی کردیم و گفتیم فیلتر ها چی هستند . 
 
**فیلتر ها چطوری کار میکنن ؟ **
سوال خوبیه ، هر درخواست (http) قبل از رسیدن به برنامه از یک زنجیره از فیلتر ها عبور میکنه در همین حین فیلتر ها میتونن درخواست رو تغییر بدن ،‌به فیلتر بعدی پاس بدن یا اصلا مسدودش کنن !
در اینده راجب اینکه چطوری این کارو میکنن حرف میزنیم فعلا داریم اجزا رو معرفی میکنیم پس عجله نکنید اصلا . 

**بعد از تموم شدن کار فیلترها سرولت وارد عمل میشه**


**اما سوال پیش میاد که این اصلا چیه ؟**

سرولت ها پردازش نهایی درخواست ها و تولید پاسخ ها هستند . بنظر که خیلی مهم میاد . 

DispatcherServlet : سرولت‌ها در Java EE (و Spring MVC) مسئول پردازش نهایی درخواست‌ها و تولید پاسخ‌ها هستند.

**نقش سرولت ها دقیقا چیه ؟**

درخواست هارو به کنترلر مناسب میفرستن ، منطق برنامه رو اجرا میکنن و در نهایت پاسخ رو تولید میکنن . 

نکته ایی که گفتم رو دوباره تکرار میکنم فیلترها قبل و بعد سرولت قرار دارن !



تفاوت فیلتر و سرولت

|   سرولت (Servlet)                             | فیلتر (Filter)                                                       |   ویژگی                                  |
|-----------------------------------------------|----------------------------------------------------------------------|------------------------------------------|
|           پردازش اصلی درخواست                 |       قبل از سرولت (پیش‌پردازش)                                      |    موقعیت اجرا                           |
|               پردازش نهایی را انجام می‌دهد    |                          ی‌تواند تغییر دهد یا مسدود کند              |          تغییر Request/Response          |
|                عمولاً مستقیماً استفاده نمی‌شود|                                                همه مکانیسم‌های امنیتی|                استفاده در Spring Security|



دلیل اینکه به صورت عملی هنوز کاری نکردیم اینکه اول درک درستی پیدا کنیم بعد بریم سراغ کد نویسیش . 
تریب فیلتر ها مهمه .
نکته بعدی اینکه سرولت ها روی سرور قرار دارن و چیز جداگونه ایی نیستند .

![hello](/home/arshiali/Documents/shot.png)
این هم یک مسیر کلی که قراره دونه دونه بریم سراغشون 








